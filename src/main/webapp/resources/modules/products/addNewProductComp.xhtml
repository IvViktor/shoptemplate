<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:composite="http://java.sun.com/jsf/composite">

	<composite:interface>
		<composite:attribute name="productTitle" />
		<composite:attribute name="productPrice" />
		<composite:attribute name="category" />
		<composite:attribute name="categories" />
		<composite:attribute name="description" />
		<composite:attribute name="iconImage" />
		<composite:attribute name="iconDesc" />
		<composite:attribute name="submitAction" method-signature="java.lang.String action()" />
	</composite:interface>

	<composite:implementation>
		<div class="addnewproduct">
			<h:form  enctype="multipart/form-data">
				<h2>Add new product</h2>
				Enter product title: <h:inputText value="#{cc.attrs.productTitle}" /><br />
				Enter product price: <h:inputText value="#{cc.attrs.productPrice}" /><br/>
				Select product category:
				<input type="hidden" id="selectedcategory" value="#{cc.attrs.category}"/>
			   	<select onchange="setCategory(this.value);">
						<ui:repeat value="#{cc.attrs.categories}" val="cat">
							<option value="#{cat.getTitle()}">#{cat.getTitle()}</option>
						</ui:repeat>	
				</select><br />
				<h:inputTextarea value="#{cc.attrs.description}" cols="30" rows="7" />
				<br />
				Choose picture for icon:
 				<h:inputFile multiple="false" allowTypes="/(\.|\/)(gif|jpeg|png)$/" 
				value="#{cc.attrs.iconImage}" required="true" mode="simple"/><br />
				Enter description for your picture:
				<h:inputText value="#{cc.attrs.iconDesc}" />
				<h:commandButton value="Add product" action="#{cc.attrs.submitAction}" />
			</h:form>
		</div>
		<script>
			function setCategory(text){
				document.getElementById("selectedcategory").value = text;
			}
		</script>
	</composite:implementation>

</html>   
